# RBP Stack Configuration
# Copy this file to your project root as rbp-config.yaml

project:
  name: "finance-guru"
  description: "Autonomous Epic implementation with BMAD + Beads"

paths:
  # Where your BMAD stories live
  stories: "docs/bmm/implementation-artifacts/stories"

  # Where quick-plan specs are saved
  specs: "docs/specs"

  # Where beads state is stored (created by bd init)
  beads: ".beads"

  # Where RBP scripts are installed
  scripts: "scripts/rbp"

  # Where slash commands are installed
  commands: ".claude/commands/rbp"

execution:
  # Maximum Ralph loop iterations before stopping
  max_iterations: 50

  # Subtasks per execution phase (for large tasks)
  phase_size: 5

  # Pause between iterations (seconds)
  iteration_delay: 2

verification:
  # Require bun test to pass before closing beads
  require_tests: true

  # Auto-detect UI stories and require Playwright
  require_playwright_for_ui: true

  # Test commands (adjust for your project)
  test_command: "bun run test"
  typecheck_command: "bun run typecheck"
  playwright_command: "bunx playwright test"

# UI detection: stories matching these keywords in acceptance criteria
# will automatically require Playwright verification
ui_detection:
  enabled: true
  keywords:
    - "UI"
    - "component"
    - "visual"
    - "browser"
    - "render"
    - "display"
    - "click"
    - "button"
    - "form"
    - "modal"
    - "sidebar"
    - "header"
    - "page"
    - "screen"
    - "responsive"
    - "mobile"
    - "layout"
    - "style"
    - "CSS"
    - "frontend"

# BMAD workflow command paths
bmad:
  create_story: "/bmad:bmm:workflows:create-story"
  dev_story: "/bmad:bmm:workflows:dev-story"
  code_review: "/bmad:bmm:workflows:code-review"

# Quick-plan workflow configuration
quick_plan:
  # Slash command to create specs
  command: "/quick-plan"

  # Template for RBP-compatible specs
  spec_template: "templates/spec-template.md"

# Codex pre-flight review configuration
codex:
  # Enable Codex review before execution
  enabled: true

  # Codex model to use
  model: "gpt-5.2-codex"

  # Reasoning effort level (low, medium, high)
  reasoning_effort: "high"

  # Skip review by default (can override with --skip-review)
  skip_by_default: false

# Hooks configuration (for reference - actual hooks go in .claude/settings.json)
hooks:
  session_start:
    - "bd prime 2>/dev/null || true"
    - "scripts/rbp/show-active-task.sh"
  pre_compact:
    - "scripts/rbp/save-progress-to-beads.sh"
