{
  "broker": "E*TRADE",
  "status": "coming_soon",
  "last_updated": "2026-01-16",
  "notes": "E*TRADE CSV format mapping for portfolio and balance exports.",
  "positions_csv": {
    "file_pattern": "etrade_portfolio_*.csv",
    "expected_columns": {
      "symbol": {
        "etrade_column": "Symbol",
        "data_type": "string",
        "example": "TSLA",
        "finance_guru_field": "ticker"
      },
      "quantity": {
        "etrade_column": "Qty",
        "data_type": "number",
        "example": "74",
        "finance_guru_field": "shares"
      },
      "price_paid": {
        "etrade_column": "Price Paid",
        "data_type": "currency",
        "example": "$234.19",
        "finance_guru_field": "average_cost_basis"
      },
      "last_price": {
        "etrade_column": "Last Price",
        "data_type": "currency",
        "example": "$448.96",
        "finance_guru_field": "current_price"
      },
      "value": {
        "etrade_column": "Value",
        "data_type": "currency",
        "example": "$33223.04",
        "finance_guru_field": "current_value"
      },
      "gain_loss": {
        "etrade_column": "Gain/Loss $",
        "data_type": "currency",
        "example": "+$15892.97",
        "finance_guru_field": "total_gain_loss_dollar"
      },
      "gain_loss_percent": {
        "etrade_column": "Gain/Loss %",
        "data_type": "percentage",
        "example": "+91.70%",
        "finance_guru_field": "total_gain_loss_percent"
      }
    },
    "manual_mapping_required": true,
    "header_row": 1,
    "data_starts_row": 2,
    "encoding": "utf-8",
    "delimiter": ",",
    "notes": "E*TRADE 'Complete View' export format. May include multiple account types in single export."
  },
  "balances_csv": {
    "file_pattern": "etrade_balances_*.csv",
    "expected_fields": {
      "cash_available": {
        "etrade_key": "Cash Available for Investment",
        "data_type": "currency",
        "finance_guru_field": "settled_cash"
      },
      "margin_balance": {
        "etrade_key": "Margin Debit",
        "data_type": "currency",
        "finance_guru_field": "net_debit",
        "notes": "Should be negative"
      },
      "account_value": {
        "etrade_key": "Total Account Value",
        "data_type": "currency",
        "finance_guru_field": "total_account_value"
      },
      "buying_power": {
        "etrade_key": "Buying Power",
        "data_type": "currency",
        "finance_guru_field": "buying_power"
      }
    },
    "manual_mapping_required": true,
    "format_notes": "E*TRADE may provide balances in detailed account summary format"
  },
  "transaction_history_csv": {
    "file_pattern": "etrade_transactions_*.csv",
    "expected_columns": {
      "transaction_date": {
        "etrade_column": "Transaction Date",
        "data_type": "date",
        "finance_guru_field": "run_date"
      },
      "transaction_type": {
        "etrade_column": "Transaction Type",
        "data_type": "string",
        "finance_guru_field": "action"
      },
      "symbol": {
        "etrade_column": "Symbol",
        "data_type": "string",
        "finance_guru_field": "symbol"
      },
      "quantity": {
        "etrade_column": "Quantity",
        "data_type": "number",
        "finance_guru_field": "quantity"
      },
      "price": {
        "etrade_column": "Price",
        "data_type": "currency",
        "finance_guru_field": "price"
      },
      "amount": {
        "etrade_column": "Amount",
        "data_type": "currency",
        "finance_guru_field": "amount"
      },
      "commission": {
        "etrade_column": "Commission",
        "data_type": "currency",
        "finance_guru_field": "commission"
      }
    },
    "manual_mapping_required": true
  },
  "parsing_notes": {
    "currency_format": "US format with $ prefix",
    "percentage_format": "Decimal with % symbol",
    "date_format": "MM/DD/YYYY",
    "special_handling": "E*TRADE may include account type prefix in symbol column for certain positions"
  },
  "validation_rules": {
    "positions": [
      "Symbol must not be empty",
      "Qty must be positive",
      "Price Paid must be positive"
    ],
    "balances": [
      "Total Account Value must be positive",
      "Margin Debit should be negative if using margin"
    ]
  },
  "onboarding_workflow": {
    "step_1": "User exports 'Complete View' CSV from E*TRADE",
    "step_2": "Finance Guru detects non-standard format",
    "step_3": "User selects 'E*TRADE' from broker list",
    "step_4": "System loads etrade-mapping.json",
    "step_5": "User confirms column mappings",
    "step_6": "Data imported successfully"
  }
}
