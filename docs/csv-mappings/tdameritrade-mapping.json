{
  "broker": "TD Ameritrade",
  "status": "coming_soon",
  "last_updated": "2026-01-16",
  "notes": "TD Ameritrade is now owned by Charles Schwab. Users may be migrated to Schwab platform. Use schwab-mapping.json if migrated.",
  "migration_notice": "TD Ameritrade merged with Charles Schwab in 2023. If your account has been migrated, use schwab-mapping.json instead.",
  "positions_csv": {
    "file_pattern": "tda_positions_*.csv",
    "expected_columns": {
      "symbol": {
        "tda_column": "Symbol",
        "data_type": "string",
        "example": "TSLA",
        "finance_guru_field": "ticker"
      },
      "quantity": {
        "tda_column": "Quantity",
        "data_type": "number",
        "example": "74",
        "finance_guru_field": "shares"
      },
      "average_price": {
        "tda_column": "Average Price",
        "data_type": "currency",
        "example": "$234.19",
        "finance_guru_field": "average_cost_basis"
      },
      "last_price": {
        "tda_column": "Last",
        "data_type": "currency",
        "example": "$448.96",
        "finance_guru_field": "current_price"
      },
      "market_value": {
        "tda_column": "Market Value",
        "data_type": "currency",
        "example": "$33223.04",
        "finance_guru_field": "current_value"
      },
      "gain_loss": {
        "tda_column": "Gain/Loss",
        "data_type": "currency",
        "example": "+$15892.97",
        "finance_guru_field": "total_gain_loss_dollar"
      },
      "gain_loss_percent": {
        "tda_column": "% Gain/Loss",
        "data_type": "percentage",
        "example": "+91.70%",
        "finance_guru_field": "total_gain_loss_percent"
      }
    },
    "manual_mapping_required": true,
    "header_row": 1,
    "data_starts_row": 2,
    "encoding": "utf-8",
    "delimiter": ",",
    "notes": "TDA format similar to Schwab. May include account type column."
  },
  "balances_csv": {
    "file_pattern": "tda_balances_*.csv",
    "expected_fields": {
      "cash_available": {
        "tda_key": "Available Funds",
        "data_type": "currency",
        "finance_guru_field": "settled_cash"
      },
      "margin_balance": {
        "tda_key": "Margin Balance",
        "data_type": "currency",
        "finance_guru_field": "net_debit",
        "notes": "May need sign conversion"
      },
      "account_value": {
        "tda_key": "Account Value",
        "data_type": "currency",
        "finance_guru_field": "total_account_value"
      },
      "buying_power": {
        "tda_key": "Buying Power",
        "data_type": "currency",
        "finance_guru_field": "buying_power"
      }
    },
    "manual_mapping_required": true,
    "format_notes": "TDA may provide balances in summary format or detailed breakdown"
  },
  "parsing_notes": {
    "currency_format": "US format with $ prefix",
    "percentage_format": "Decimal with % symbol",
    "date_format": "MM/DD/YYYY",
    "special_handling": "Some exports may include thinkorswim columns"
  },
  "validation_rules": {
    "positions": [
      "Symbol must not be empty",
      "Quantity must be positive",
      "Average Price must be positive"
    ],
    "balances": [
      "Account Value must be positive",
      "Margin Balance may need negation if using margin"
    ]
  }
}
