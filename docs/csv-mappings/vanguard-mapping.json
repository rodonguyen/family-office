{
  "broker": "Vanguard",
  "status": "coming_soon",
  "last_updated": "2026-01-16",
  "notes": "CSV format mapping for Vanguard OFX exports. Used primarily for retirement account syncing.",
  "positions_csv": {
    "file_pattern": "OfxDownload*.csv",
    "expected_columns": {
      "account_number": {
        "vanguard_column": "Account Number",
        "data_type": "string",
        "example": "39321600",
        "finance_guru_field": "account_id"
      },
      "investment_name": {
        "vanguard_column": "Investment Name",
        "data_type": "string",
        "example": "VANGUARD S&P 500 INDEX ETF",
        "finance_guru_field": "description"
      },
      "symbol": {
        "vanguard_column": "Symbol",
        "data_type": "string",
        "example": "VOO",
        "finance_guru_field": "ticker"
      },
      "shares": {
        "vanguard_column": "Shares",
        "data_type": "number",
        "example": "18.1817",
        "finance_guru_field": "quantity"
      },
      "share_price": {
        "vanguard_column": "Share Price",
        "data_type": "currency",
        "example": "629.3",
        "finance_guru_field": "current_price"
      },
      "total_value": {
        "vanguard_column": "Total Value",
        "data_type": "currency",
        "example": "11441.74",
        "finance_guru_field": "current_value"
      }
    },
    "manual_mapping_required": true,
    "header_row": 1,
    "data_starts_row": 2,
    "encoding": "utf-8",
    "delimiter": ",",
    "notes": "Vanguard OFX exports include trailing comma. Multiple accounts may be in same file. Cost basis NOT included in standard export."
  },
  "balances_csv": {
    "file_pattern": "vanguard_balances_*.csv",
    "expected_fields": {
      "account_balance": {
        "vanguard_key": "Account Balance",
        "data_type": "currency",
        "finance_guru_field": "total_account_value"
      },
      "cash_available": {
        "vanguard_key": "Cash Available",
        "data_type": "currency",
        "finance_guru_field": "settled_cash"
      },
      "pending_activity": {
        "vanguard_key": "Pending Activity",
        "data_type": "currency",
        "finance_guru_field": "pending_activity"
      }
    },
    "manual_mapping_required": true,
    "format_notes": "Vanguard balances are typically summary format with account totals. Margin not applicable for most Vanguard accounts."
  },
  "transaction_history_csv": {
    "file_pattern": "vanguard_transactions_*.csv",
    "expected_columns": {
      "trade_date": {
        "vanguard_column": "Trade Date",
        "data_type": "date",
        "finance_guru_field": "run_date"
      },
      "settlement_date": {
        "vanguard_column": "Settlement Date",
        "data_type": "date",
        "finance_guru_field": "settlement_date"
      },
      "transaction_type": {
        "vanguard_column": "Transaction Type",
        "data_type": "string",
        "finance_guru_field": "action",
        "notes": "Buy, Sell, Dividend, Distribution"
      },
      "symbol": {
        "vanguard_column": "Symbol",
        "data_type": "string",
        "finance_guru_field": "symbol"
      },
      "shares": {
        "vanguard_column": "Shares",
        "data_type": "number",
        "finance_guru_field": "quantity"
      },
      "price": {
        "vanguard_column": "Price",
        "data_type": "currency",
        "finance_guru_field": "price"
      },
      "amount": {
        "vanguard_column": "Amount",
        "data_type": "currency",
        "finance_guru_field": "amount"
      }
    },
    "manual_mapping_required": true
  },
  "retirement_specific": {
    "account_types": ["IRA", "Roth IRA", "401k rollover", "Brokerage"],
    "multiple_accounts_handling": "Account Number field identifies which account each position belongs to",
    "cost_basis_limitation": "Vanguard OFX export does NOT include cost basis. Manual entry required or use tax documents.",
    "aggregation_strategy": "Finance Guru aggregates holdings by ticker across all Vanguard accounts in retirement section"
  },
  "parsing_notes": {
    "currency_format": "No $ prefix, commas for thousands, periods for decimals",
    "percentage_format": "Not typically included",
    "date_format": "MM/DD/YYYY",
    "special_handling": "Trailing comma on each row must be handled. Empty final column common."
  },
  "validation_rules": {
    "positions": [
      "Symbol must not be empty",
      "Shares must be positive",
      "Account Number should match known Vanguard account format (8 digits)"
    ],
    "balances": [
      "Account Balance must be positive",
      "Multiple accounts should aggregate correctly"
    ]
  },
  "onboarding_workflow": {
    "step_1": "User exports OFX download from Vanguard",
    "step_2": "Finance Guru detects Vanguard format via 'Account Number' column",
    "step_3": "User confirms this is Vanguard retirement accounts",
    "step_4": "System maps to retirement section of DataHub (rows 46-62)",
    "step_5": "Only quantity synced (price from GOOGLEFINANCE)",
    "step_6": "Cost basis remains manual entry"
  },
  "known_limitations": [
    "No cost basis in standard export",
    "No gain/loss calculations",
    "Multiple accounts require aggregation logic",
    "Trailing commas require special parsing"
  ]
}
